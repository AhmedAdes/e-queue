<section id="horizontal-form-layouts">
  <div class="row">
    <div class="col-md-12">
      Active Tickets
      <div class="card bg-blue bg-lighten-1">
        <div class="card-body">
          <div class="px-3">
            <p *ngIf="!tickets || tickets.length <= 0"> No Active tickets to be viewed.</p>
            <ngb-tabset type="pills" orientation="horizontal" justify="fill" *ngIf="tickets && tickets.length > 0">
              <ngb-tab *ngFor="let tkt of tickets" [id]="tkt.QID" [title]="tkt.ServiceNo">
                <ng-template ngbTabContent>
                  <p><b>Company:</b> {{tkt.CompName}}</p>
                  <p><b>Department:</b> {{tkt.DeptName}}</p>
                  <p><b>Branch:</b> {{tkt.BranchName}}</p>
                  <p><b>Visit Date:</b> {{tkt.VisitDate | date: 'mediumDate'}}</p>
                  <p><b>Estimated visit time:</b> {{tkt.visTimeChngd | date: 'shortTime'}}</p>
                  <p><b>Ticket Unique No:</b> {{tkt.UniqueNo}}</p>
                  <p><b>Current Visit State:</b> {{tkt.QStatus}}</p>
                  <p><b>Branch Address: </b>{{tkt.BranchAddress}}</p>
                  <p><b>Requested Services:</b> </p>
                  <div class="row">
                    <div class="col-md-12 col-sm-12">
                      <table class="table table-brdered table-hover">
                        <colgroup>
                          <col width="25%"/>
                          <col width="25%"/>
                          <col width="50%"/>
                        </colgroup>
                        <thead>
                          <tr>
                            <th >Service</th>
                            <th >Count</th>
                            <th >Notes</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let sr of tkt.Services">
                            <td>{{sr.ServName}}</td>
                            <td>{{sr.ServCount}}</td>
                            <td>{{sr.Notes}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4 col-md-offset-4">
                      <button class="btn btn-lg btn-raised btn-primary" (click)="CancelTicket(tkt)"> Cancel This Ticket </button>
                    </div>
                  </div>
                </ng-template>
              </ngb-tab>
            </ngb-tabset>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
